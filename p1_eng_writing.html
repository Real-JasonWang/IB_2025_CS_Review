<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IB English B SL Paper 1 å¤‡è€ƒæµ‹éªŒ - By Jason Wang</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .option-btn:not([disabled]):hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .option-btn:not([disabled]):active {
            transform: translateY(0);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .results-enter {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .results-enter-active {
            opacity: 1;
            transform: translateY(0);
        }
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        .correct-answer {
            background-color: #22c55e !important;
            color: white !important;
            border-color: #16a34a !important;
        }
        .wrong-answer {
            background-color: #ef4444 !important;
            color: white !important;
            border-color: #dc2626 !important;
        }
        .progress-bar-container {
            background-color: #e5e7eb;
            border-radius: 9999px;
            overflow: hidden;
            height: 1rem;
            margin-bottom: 1.5rem;
        }
        .progress-bar {
            background-color: #4f46e5;
            height: 100%;
            transition: width 0.3s ease-in-out;
            text-align: center;
            color: white;
            font-size: 0.75rem;
            line-height: 1rem;
            font-weight: 500;
            border-radius: 9999px;
        }
        @keyframes celebrate {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .celebrate-bg {
            background: linear-gradient(270deg, #a855f7, #ec4899, #f59e0b, #22c55e, #3b82f6);
            background-size: 1000% 1000%;
            animation: celebrate 5s ease infinite;
        }
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
        .explanation {
            background-color: #e2e8f0;
            border-left: 4px solid #4f46e5;
            padding: 1rem;
            border-radius: 0.375rem;
            color: #475569;
            font-size: 0.875rem;
            margin-top: 1rem;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100 min-h-screen flex flex-col items-center justify-center p-4 relative">
    <canvas id="confetti-canvas"></canvas>
    <div id="quiz-container" class="bg-white rounded-xl shadow-2xl p-6 md:p-10 w-full max-w-2xl relative z-10">
        <a href="index.html"
            class="inline-block text-center justify-center items-center bg-purple-500 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
         ğŸ‘ˆä¸»é¡µ
         </a>
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-2">IB English B SL Paper 1 å¤‡è€ƒæµ‹éªŒ</h1>
        <p class="text-center text-gray-600 mb-6">æµ‹è¯•ä½ å¯¹ Paper 1 çš„äº†è§£ç¨‹åº¦ï¼</p>

        <div id="game-area">
            <div class="flex justify-between items-center mb-4 text-gray-600">
                <span id="question-counter" class="text-sm md:text-base font-medium">é—®é¢˜ 1 / 50</span>
                <span id="score-display" class="text-sm md:text-base font-medium">å¾—åˆ†: 0 / 0 (0%)</span>
            </div>
            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar" style="width: 0%;">0%</div>
            </div>

            <div id="question-container" class="mb-6">
                <h2 id="question-text" class="text-lg md:text-xl font-semibold text-gray-700 leading-relaxed min-h-[3em]">é—®é¢˜æ–‡æœ¬åŠ è½½ä¸­...</h2>
            </div>
            <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            </div>
            
            <div id="feedback-area" class="text-center h-auto mb-4 text-base font-medium hidden">
                <div id="feedback-text" class="text-lg font-semibold mb-2"></div>
                <div id="explanation-text" class="explanation text-left"></div>
            </div>

            <div class="text-center">
                <button id="next-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg shadow-md transition duration-300 ease-in-out hidden">
                ä¸‹ä¸€é¢˜
                </button>
            </div>
        </div>

        <div id="results-area" class="hidden text-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ‰ æµ‹éªŒå®Œæˆ! ğŸ‰</h2>
            <p id="final-score" class="text-xl text-gray-700 mb-6"></p>
            <p id="result-message" class="text-lg text-gray-600 mb-8"></p>
            <button id="restart-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg shadow-md transition duration-300 ease-in-out">
            é‡æ–°å¼€å§‹
            </button>
        </div>
        <p class="text-center text-gray-600 mb-6">&copy; 2024-2025 IB Revision Toys. Design & Made with Love by Jason Wang.</p>
    </div>

    <script>
        const questions = [
            {
                question: "Which of the following is NOT a subtopic of the 'Identities' theme in IB English B?",
                options: ["Lifestyles", "Beliefs and values", "Scientific innovation", "Subcultures"],
                answer: "Scientific innovation",
                explanation: "'Scientific innovation' is a subtopic of 'Human Ingenuity'. 'Identities' covers aspects like lifestyles, beliefs, values, and subcultures."
            },
            {
                question: "The theme 'Experiences' in IB English B primarily focuses on:",
                options: ["The history of human civilization", "Significant life events and personal journeys", "The structure of global economies", "Political systems and governance"],
                answer: "Significant life events and personal journeys",
                explanation: "'Experiences' explores aspects like leisure, holidays, life stories, rites of passage, and migration, all relating to personal journeys and events."
            },
            {
                question: "Which theme would most likely cover a discussion about the impact of social media on communication?",
                options: ["Identities", "Sharing the Planet", "Human Ingenuity", "Experiences"],
                answer: "Human Ingenuity",
                explanation: "'Human Ingenuity' deals with communication, media, and technology. While social media can impact identities or experiences, its origin and function as a tool for communication fall under Human Ingenuity."
            },
            {
                question: "A text discussing community engagement and the education system would fall under which IB English B theme?",
                options: ["Social Organization", "Human Ingenuity", "Identities", "Sharing the Planet"],
                answer: "Social Organization",
                explanation: "'Social Organization' covers topics like community, social engagement, education, and the workplace."
            },
            {
                question: "Which of these topics is central to the theme 'Sharing the Planet'?",
                options: ["Artistic expression", "Technological advancements", "Environmental issues and ethics", "Personal hobbies and leisure"],
                answer: "Environmental issues and ethics",
                explanation: "'Sharing the Planet' focuses on global issues like the environment, human rights, peace and conflict, globalization, and ethics."
            },
            {
                question: "A student writing about adapting to a new culture after moving abroad is primarily engaging with which theme?",
                options: ["Experiences", "Identities", "Human Ingenuity", "Social Organization"],
                answer: "Experiences",
                explanation: "While it touches on 'Identities', the core of adapting to a new culture through migration is a significant life 'Experience'."
            },
            {
                question: "The subtopic 'ethics related to scientific discovery' would best fit under which theme?",
                options: ["Human Ingenuity", "Sharing the Planet", "Identities", "Social Organization"],
                answer: "Human Ingenuity",
                explanation: "'Human Ingenuity' covers scientific innovation. 'Sharing the Planet' might cover broader ethical dilemmas, but ethics tied directly to scientific discovery is more aligned with Human Ingenuity. Sometimes themes can overlap."
            },
            {
                question: "A discussion on 'the role of law and order in society' aligns best with which theme?",
                options: ["Social Organization", "Identities", "Experiences", "Human Ingenuity"],
                answer: "Social Organization",
                explanation: "'Social Organization' explicitly includes 'law and order' as one ofits subtopics."
            },
            {
                question: "If a Paper 1 prompt asks you to write about 'your ideal holiday', which theme is it most directly tapping into?",
                options: ["Experiences", "Identities", "Sharing the Planet", "Human Ingenuity"],
                answer: "Experiences",
                explanation: "Holidays and travel are key subtopics of the 'Experiences' theme."
            },
            {
                question: "The impact of globalization on local traditions could be explored under which two themes most effectively?",
                options: ["Sharing the Planet and Identities", "Human Ingenuity and Experiences", "Social Organization and Identities", "Experiences and Sharing the Planet"],
                answer: "Sharing the Planet and Identities",
                explanation: "'Sharing the Planet' covers globalization, and 'Identities' covers how traditions shape identity, which can be affected by globalization."
            },
            {
                question: "What is the typical register for a formal letter of complaint to a company?",
                options: ["Informal and friendly", "Formal and polite", "Casual and direct", "Sarcastic and critical"],
                answer: "Formal and polite",
                explanation: "A letter of complaint to a company should maintain a formal and polite tone, even when expressing dissatisfaction, to be taken seriously."
            },
            {
                question: "Which text type is most suitable for sharing personal reflections and opinions with a wide online audience, inviting comments?",
                options: ["A blog post", "A formal report", "A private diary entry", "An official proposal"],
                answer: "A blog post",
                explanation: "Blog posts are designed for sharing personal views, are typically informal or semi-formal, and encourage interaction through comments."
            },
            {
                question: "In Paper 1, if a task asks you to 'write an article for your school magazine about a recent event', what is a key feature you should include?",
                options: ["A personal salutation like 'Dear readers'", "A clear headline and an engaging introduction (lead)", "A list of references at the end", "Your personal contact information"],
                answer: "A clear headline and an engaging introduction (lead)",
                explanation: "Articles typically require a headline to grab attention and an introduction (lead paragraph) that summarizes the main points or hooks the reader."
            },
            {
                question: "What is the primary purpose of a film review?",
                options: ["To provide a detailed plot summary only", "To advertise the film to a wide audience", "To offer a critical assessment and recommendation", "To interview the director and actors"],
                answer: "To offer a critical assessment and recommendation",
                explanation: "A film review aims to evaluate a film's strengths and weaknesses and usually offers an opinion on whether others should watch it."
            },
            {
                question: "When writing a speech, what is crucial to consider for engaging the audience?",
                options: ["Using highly academic vocabulary only", "Reading directly from a script without eye contact", "Using rhetorical questions and a conversational tone", "Including as many statistics as possible"],
                answer: "Using rhetorical questions and a conversational tone",
                explanation: "Speeches are more engaging when they connect with the audience through techniques like rhetorical questions, a suitable tone, and clear delivery (implied)."
            },
            {
                question: "An interview text type typically features:",
                options: ["A single narrative voice", "A question-and-answer format", "Only the interviewer's opinions", "A list of facts and figures"],
                answer: "A question-and-answer format",
                explanation: "The most common structure for an interview is a Q&A format, presenting both the interviewer's questions and the interviewee's responses."
            },
            {
                question: "What is a primary goal of a brochure advertising a new tourist destination?",
                options: ["To provide a complex historical analysis", "To persuade and inform potential visitors", "To compare it critically with other destinations", "To publish academic research on tourism"],
                answer: "To persuade and inform potential visitors",
                explanation: "Brochures are marketing materials designed to attract and inform their target audience, in this case, potential tourists, using persuasive language and key information."
            },
            {
                question: "A formal report submitted to a manager about a project's progress should be:",
                options: ["Subjective and opinion-based", "Structured, objective, and factual", "Informal and chatty", "Filled with personal anecdotes"],
                answer: "Structured, objective, and factual",
                explanation: "Formal reports require a clear structure (e.g., introduction, findings, conclusion), an objective tone, and information based on facts or evidence."
            },
            {
                question: "What is the main objective of a proposal written to the school board?",
                options: ["To entertain the board members", "To complain about existing school policies", "To suggest a new idea or plan and seek approval/support", "To report on past school events"],
                answer: "To suggest a new idea or plan and seek approval/support",
                explanation: "A proposal aims to present a plan or suggestion with the goal of persuading the audience (the school board) to accept or support it."
            },
            {
                question: "Which of these is a characteristic feature of a diary entry?",
                options: ["Formal language and objective tone", "Written for a public audience", "Includes date, personal reflections, and first-person narrative", "Focuses on reporting news events"],
                answer: "Includes date, personal reflections, and first-person narrative",
                explanation: "Diary entries are personal, typically dated, written in the first person, and focus on the writer's thoughts, feelings, and experiences."
            },
            {
                question: "If a prompt asks you to write an email to a friend inviting them to your birthday party, the register should be:",
                options: ["Highly formal", "Informal", "Strictly neutral", "Academic"],
                answer: "Informal",
                explanation: "Emails to friends are typically informal, using casual language and a friendly tone."
            },
            {
                question: "Which text type often uses headings, subheadings, and bullet points to present information clearly and concisely?",
                options: ["A personal diary entry", "A narrative story", "A report or a proposal", "A poem"],
                answer: "A report or a proposal",
                explanation: "Reports and proposals frequently use structural elements like headings, subheadings, and bullet points to organize information for easy reading and understanding."
            },
             {
                question: "The closing 'Yours sincerely,' is typically used in which type of letter?",
                options: ["An informal letter to a close friend", "A formal letter when you know the recipient's name (e.g., Dear Mr. Smith)", "A formal letter when you don't know the recipient's name (e.g., Dear Sir/Madam)", "An email to a colleague"],
                answer: "A formal letter when you know the recipient's name (e.g., Dear Mr. Smith)",
                explanation: "'Yours sincerely,' is used in formal letters when you have addressed the recipient by name (e.g., Dear Mr. Brown). If you use 'Dear Sir/Madam,' you would end with 'Yours faithfully.'"
            },
            {
                question: "What is the main difference between an article and a blog post, generally?",
                options: ["Articles are always shorter than blog posts.", "Blog posts are typically more personal and can be more informal than traditional articles.", "Articles are only found online, while blog posts are in print.", "Blog posts do not have authors, unlike articles."],
                answer: "Blog posts are typically more personal and can be more informal than traditional articles.",
                explanation: "While there's overlap, blog posts often have a more personal voice and can adopt a more informal or conversational tone compared to traditional news or magazine articles, which tend to be more objective or formal."
            },
            {
                question: "A 'call to action' is a common feature in which text type?",
                options: ["A news report", "A diary entry", "A persuasive advertisement or brochure", "An academic essay"],
                answer: "A persuasive advertisement or brochure",
                explanation: "A 'call to action' (e.g., 'Visit our website today!', 'Buy now!') encourages the reader to take a specific step and is common in persuasive texts like advertisements or brochures."
            },
            {
                question: "When writing a review of a restaurant for a local newspaper, who is your primary audience?",
                options: ["The restaurant owner only", "Professional chefs and food critics", "The general public in your local area", "Your close friends and family"],
                answer: "The general public in your local area",
                explanation: "A restaurant review in a local newspaper is aimed at informing and guiding the general public who might be considering dining at that establishment."
            },
            {
                question: "Which of the following is LEAST likely to be a feature of a formal proposal?",
                options: ["Clear statement of purpose", "Slang and colloquial language", "Logical structure with headings", "A proposed plan of action"],
                answer: "Slang and colloquial language",
                explanation: "Formal proposals require a professional tone and precise language. Slang and colloquialisms are inappropriate for such a text type."
            },
            {
                question: "If you are asked to write a 'set of guidelines' for new students, this text type would aim to:",
                options: ["Entertain", "Inform and instruct", "Persuade them to leave", "Critique their behavior"],
                answer: "Inform and instruct",
                explanation: "Guidelines are meant to provide clear information and instructions on how to do something or behave in a certain situation."
            },
            {
                question: "The phrase 'Dear Sir/Madam,' is an appropriate salutation when:",
                options: ["Writing an email to your best friend.", "Writing a formal letter when you do not know the name of the recipient.", "Writing a blog post about your holiday.", "Writing a text message to your teacher."],
                answer: "Writing a formal letter when you do not know the name of the recipient.",
                explanation: "'Dear Sir/Madam,' is a standard formal salutation used when the specific name of the person you are writing to is unknown."
            },
            {
                question: "Which text type is most likely to use persuasive rhetorical devices extensively, such as emotive language and direct address to the reader (e.g., 'you')?",
                options: ["An objective news report", "A scientific research paper", "An advertisement or a persuasive speech", "A technical manual"],
                answer: "An advertisement or a persuasive speech",
                explanation: "Advertisements and persuasive speeches heavily rely on rhetorical devices to influence the audience's thoughts, feelings, or actions."
            },
            {
                question: "In academic writing, 'cohesion' refers to:",
                options: ["Using complex vocabulary", "The grammatical and lexical linking within a text (e.g., conjunctions, pronouns)", "The writer's personal opinion", "The number of paragraphs in an essay"],
                answer: "The grammatical and lexical linking within a text (e.g., conjunctions, pronouns)",
                explanation: "Cohesion refers to how different parts of a text are linked together at the sentence and paragraph level using devices like conjunctions (e.g., 'however', 'therefore'), pronouns, and lexical chains."
            },
            {
                question: "What is the purpose of a topic sentence in a paragraph?",
                options: ["To provide a concluding thought", "To introduce the main idea of the paragraph", "To list all the sources used", "To ask a rhetorical question"],
                answer: "To introduce the main idea of the paragraph",
                explanation: "A topic sentence usually appears at the beginning of a paragraph and states the central point or argument that the paragraph will develop."
            },
            {
                question: "Which of the following demonstrates a formal register in writing?",
                options: ["'Hey guys, check this out!'", "'It is imperative that we consider the ramifications.'", "'It's kinda like, you know, a big deal.'", "'We gotta do something ASAP.'"],
                answer: "'It is imperative that we consider the ramifications.'",
                explanation: "Formal register involves using precise vocabulary (e.g., 'imperative', 'ramifications'), complete sentences, and avoiding slang, contractions, or overly casual language."
            },
            {
                question: "To improve clarity in writing, one should generally avoid:",
                options: ["Using specific examples", "Ambiguous pronoun references", "Clear topic sentences", "Transitional phrases"],
                answer: "Ambiguous pronoun references",
                explanation: "Ambiguous pronoun references (e.g., when 'it' or 'they' could refer to multiple things) can confuse the reader and obscure meaning. Clarity is enhanced by clear referents."
            },
            {
                question: "Which of these is an example of a 'cohesive device' used for contrast?",
                options: ["Furthermore", "In addition", "However", "For example"],
                answer: "However",
                explanation: "'However' is a conjunctive adverb used to introduce a statement that contrasts with or contradicts something that has been said previously."
            },
            {
                question: "When planning a written piece for Paper 1, what is the first crucial step after choosing a prompt?",
                options: ["Start writing immediately to save time", "Brainstorm ideas and create a brief outline", "Check the word count of similar texts", "Choose the most complex vocabulary you know"],
                answer: "Brainstorm ideas and create a brief outline",
                explanation: "Effective planning involves brainstorming relevant ideas and structuring them into a logical outline before starting to write. This ensures coherence and addresses all parts of the prompt."
            },
            {
                question: "Using a wide range of appropriate vocabulary is important in Paper 1 because it:",
                options: ["Makes the text longer", "Demonstrates linguistic proficiency and precision", "Is the only criterion for a high score", "Guarantees the reader will be entertained"],
                answer: "Demonstrates linguistic proficiency and precision",
                explanation: "A varied and precise vocabulary (Criterion A: Language) shows the examiner your command of English and allows you to express ideas more effectively."
            },
            {
                question: "What does 'audience awareness' mean in the context of IB English B writing?",
                options: ["Writing only about topics the audience likes", "Knowing the exact number of people who will read your text", "Considering who your reader is and adapting your style, tone, and content accordingly", "Using as many technical terms as possible to impress the audience"],
                answer: "Considering who your reader is and adapting your style, tone, and content accordingly",
                explanation: "Audience awareness involves tailoring your writing (language, register, information included) to suit the intended readers and the purpose of the text."
            },
            {
                question: "In Paper 1, maintaining a consistent 'tone' means:",
                options: ["Writing in a monotone, unvarying style", "Ensuring the overall feeling or attitude conveyed by the writing is appropriate for the text type and purpose", "Only using positive language", "Making sure every sentence is the same length"],
                answer: "Ensuring the overall feeling or attitude conveyed by the writing is appropriate for the text type and purpose",
                explanation: "Tone refers to the writer's attitude towards the subject or audience. It should be consistent and suitable for the context (e.g., formal, informal, persuasive, objective)."
            },
            {
                question: "Proofreading your work before submission is important primarily to:",
                options: ["Add more complex ideas", "Correct errors in grammar, spelling, and punctuation", "Change the entire structure of your text", "Ensure you have met the exact word count"],
                answer: "Correct errors in grammar, spelling, and punctuation",
                explanation: "Proofreading helps identify and correct surface errors, which improves the clarity and professionalism of your writing and positively impacts the Language criterion."
            },
            {
                question: "IB English B SL Paper 1 is primarily an assessment of your:",
                options: ["Oral presentation skills", "Literary analysis skills", "Written productive skills", "Reading comprehension skills"],
                answer: "Written productive skills",
                explanation: "Paper 1 specifically tests your ability to produce a written text in response to a prompt, focusing on your writing abilities."
            },
            {
                question: "How many prompts will you typically choose from in the IB English B SL Paper 1 exam?",
                options: ["One", "Two", "Three", "Five"],
                answer: "Three",
                explanation: "Students are presented with three different writing prompts and must choose one to respond to."
            },
            {
                question: "The recommended word count for an IB English B SL Paper 1 response is typically:",
                options: ["100-150 words", "250-400 words", "500-650 words", "700-800 words"],
                answer: "250-400 words",
                explanation: "For Standard Level, the expected word count is generally between 250 and 400 words."
            },
            {
                question: "Which assessment criterion in Paper 1 evaluates your use of vocabulary and grammar?",
                options: ["Criterion A: Language", "Criterion B: Message", "Criterion C: Conceptual Understanding", "Criterion D: Format"],
                answer: "Criterion A: Language",
                explanation: "Criterion A specifically assesses the accuracy, range, and appropriateness of your language, including vocabulary and grammar."
            },
            {
                question: "Criterion B: Message in Paper 1 focuses on:",
                options: ["The correctness of your spelling and punctuation", "How well you develop your ideas and address the task requirements", "Your choice of text type", "The visual layout of your response"],
                answer: "How well you develop your ideas and address the task requirements",
                explanation: "Criterion B evaluates the relevance, development, and clarity of your ideas, and how effectively you have fulfilled the demands of the chosen prompt."
            },
            {
                question: "Understanding and applying the conventions of a specific text type (e.g., letter, blog post) is assessed under which criterion?",
                options: ["Criterion A: Language", "Criterion B: Message", "Criterion C: Conceptual Understanding", "None of the above"],
                answer: "Criterion C: Conceptual Understanding",
                explanation: "Criterion C assesses your understanding of the purpose, audience, and context, including the appropriate use of text type conventions (format, register, tone)."
            },
            {
                question: "What is a good strategy if you are unsure about the meaning of one of the prompts in Paper 1?",
                options: ["Guess and start writing immediately", "Choose one of the other two prompts that you understand better", "Leave that question blank and move on", "Write about a completely different topic"],
                answer: "Choose one of the other two prompts that you understand better",
                explanation: "It's crucial to fully understand the prompt. If one is unclear, it's safer and more strategic to choose a prompt you are confident you can address effectively."
            },
            {
                question: "Approximately how much time should you allocate for planning your response in the 1 hour 15 minute Paper 1 exam?",
                options: ["No time, start writing straight away", "5-10 minutes", "30 minutes", "1 hour"],
                answer: "5-10 minutes",
                explanation: "Allocating around 5-10 minutes for reading the prompts, choosing one, brainstorming, and outlining is a good practice to ensure a well-structured and relevant response."
            },
            {
                question: "What does 'register' refer to in the context of IB English B writing?",
                options: ["The official list of IB students", "The level of formality or informality of the language used", "The speed at which you write", "The number of sources cited"],
                answer: "The level of formality or informality of the language used",
                explanation: "Register refers to the style of language appropriate for a particular situation, audience, or purpose, ranging from very formal to very informal."
            },
            {
                question: "If you finish writing your Paper 1 response with 15 minutes remaining, what is the BEST use of that time?",
                options: ["Start planning for Paper 2", "Close your exam booklet and relax", "Carefully proofread and edit your work for errors and clarity", "Add as many extra sentences as possible to increase word count"],
                answer: "Carefully proofread and edit your work for errors and clarity",
                explanation: "Using remaining time to proofread for errors in grammar, spelling, punctuation, and to check for clarity and coherence can significantly improve your score, especially for Criterion A."
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const gameArea = document.getElementById('game-area');
        const resultsArea = document.getElementById('results-area');
        const questionCounter = document.getElementById('question-counter');
        const scoreDisplay = document.getElementById('score-display'); 
        const progressBar = document.getElementById('progress-bar');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackArea = document.getElementById('feedback-area'); 
        const feedbackText = document.getElementById('feedback-text'); 
        const explanationText = document.getElementById('explanation-text'); 
        const nextBtn = document.getElementById('next-btn');
        const finalScore = document.getElementById('final-score');
        const resultMessage = document.getElementById('result-message');
        const restartBtn = document.getElementById('restart-btn');
        const confettiCanvas = document.getElementById('confetti-canvas');
        
        let myConfettiInstance = null;
        if (confettiCanvas && typeof confetti !== 'undefined') {
             myConfettiInstance = confetti.create(confettiCanvas, {
                resize: true,
                useWorker: true
            });
        }
       
        let currentQuestionIndex = 0;
        let score = 0;
        let questionsAnsweredInSession = 0; 
        let shuffledQuestions = [];
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function updateScoreDisplay() {
            const percentage = questionsAnsweredInSession === 0 ? 0 : Math.round((score / questionsAnsweredInSession) * 100);
            scoreDisplay.textContent = `å¾—åˆ†: ${score} / ${questionsAnsweredInSession} (${percentage}%)`;
        }
        
        function updateProgressBar() {
            const totalQuestionsToDisplay = shuffledQuestions.length;
            const progressPercentage = totalQuestionsToDisplay === 0 ? 0 : Math.round(((currentQuestionIndex) / totalQuestionsToDisplay) * 100);
            progressBar.style.width = `${progressPercentage}%`;
            progressBar.textContent = `${progressPercentage}%`;
        }

        function updateProgressBarAfterAnswer() {
             const totalQuestionsToDisplay = shuffledQuestions.length;
             const progressPercentage = totalQuestionsToDisplay === 0 ? 0 : Math.round(((currentQuestionIndex + 1) / totalQuestionsToDisplay) * 100);
             progressBar.style.width = `${progressPercentage}%`;
             progressBar.textContent = `${progressPercentage}%`;
        }
        
        function startGame() {
            currentQuestionIndex = 0;
            score = 0;
            questionsAnsweredInSession = 0;
            shuffledQuestions = shuffleArray([...questions]); 

            updateScoreDisplay();
            progressBar.style.width = '0%';
            progressBar.textContent = '0%';
            resultsArea.classList.add('hidden');
            resultsArea.classList.remove('results-enter', 'results-enter-active');
            quizContainer.classList.remove('celebrate-bg');
            gameArea.classList.remove('hidden');
            nextBtn.classList.add('hidden');
            feedbackArea.classList.add('hidden'); 
            explanationText.innerHTML = ''; 
            showQuestion();
        }
        
        function showQuestion() {
            updateProgressBar(); 
            optionsContainer.innerHTML = '';
            feedbackArea.classList.add('hidden'); 
            feedbackText.textContent = '';
            explanationText.innerHTML = ''; 
            feedbackText.className = 'text-lg font-semibold mb-2'; 
        
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            questionText.innerHTML = currentQuestion.question; 
            questionCounter.textContent = `é—®é¢˜ ${currentQuestionIndex + 1} / ${shuffledQuestions.length}`;
        
            const shuffledOptions = shuffleArray([...currentQuestion.options]);
        
            shuffledOptions.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = 'option-btn bg-white hover:bg-gray-100 text-gray-700 font-medium py-3 px-4 border border-gray-300 rounded-lg shadow-sm transition duration-200 ease-in-out w-full text-left';
                button.addEventListener('click', selectAnswer);
                optionsContainer.appendChild(button);
            });
        
            nextBtn.classList.add('hidden');
        }
        
        function triggerConfetti() {
            if (myConfettiInstance) {
                myConfettiInstance({
                    particleCount: 120, 
                    spread: 80, 
                    origin: { y: 0.6 },
                    colors: ['#a855f7', '#ec4899', '#f59e0b', '#22c55e', '#3b82f6'] 
                });
            }
        }
        
        function selectAnswer(e) {
            const selectedButton = e.target;
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            const correctAnswer = currentQuestion.answer;
            const explanation = currentQuestion.explanation; 
            questionsAnsweredInSession++;
        
            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = true;
                if (button.textContent === correctAnswer) {
                    button.classList.add('correct-answer');
                }
            });
        
            if (selectedButton.textContent === correctAnswer) {
                score++;
                feedbackText.textContent = 'âœ… å›ç­”æ­£ç¡®!';
                feedbackText.className = 'text-lg font-semibold mb-2 text-green-600'; 
                selectedButton.classList.add('correct-answer');
                triggerConfetti(); // Removed the Math.random() condition
            } else {
                feedbackText.textContent = `âŒ å›ç­”é”™è¯¯!`; 
                feedbackText.className = 'text-lg font-semibold mb-2 text-red-600'; 
                selectedButton.classList.add('wrong-answer');
            }

            explanationText.innerHTML = `<strong>è§£æ:</strong> ${explanation}`; 
            feedbackArea.classList.remove('hidden'); 

            updateScoreDisplay();
            updateProgressBarAfterAnswer(); 
            nextBtn.classList.remove('hidden');
        }
        
        function showNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < shuffledQuestions.length) {
                showQuestion();
            } else {
                endGame();
            }
        }
        
        function endGame() {
            gameArea.classList.add('hidden');
            resultsArea.classList.remove('hidden');
            requestAnimationFrame(() => {
                 resultsArea.classList.add('results-enter');
                 requestAnimationFrame(() => {
                    resultsArea.classList.add('results-enter-active');
                });
            });
        
            const finalPercentage = shuffledQuestions.length === 0 ? 0 : Math.round((score / shuffledQuestions.length) * 100);
            finalScore.textContent = `ä½ çš„æœ€ç»ˆå¾—åˆ†æ˜¯: ${score} / ${shuffledQuestions.length} (${finalPercentage}%)`;
        
            let message = ''; 
            quizContainer.classList.remove('celebrate-bg'); 
        
            if (finalPercentage === 100) {
                message = 'ğŸ’¯ å®Œç¾ï¼ä½ ç®€ç›´æ˜¯ IB English B å¤§å¸ˆï¼çŸ¥è¯†ç‚¹æŒæ¡å¾—ç‚‰ç«çº¯é’ï¼';
                 quizContainer.classList.add('celebrate-bg');
                 if (myConfettiInstance) { myConfettiInstance(); myConfettiInstance(); } 
            } else if (finalPercentage >= 90) {
                 message = 'ğŸŒŸ å¤ªå‡ºè‰²äº†ï¼å¯¹ Paper 1 çš„ç†è§£éå¸¸æ·±åˆ»ï¼Œç»å¯¹çš„å­¦éœ¸ï¼';
                 quizContainer.classList.add('celebrate-bg');
                 if (myConfettiInstance) { myConfettiInstance(); }
            } else if (finalPercentage >= 80) {
                message = 'ğŸ† éå¸¸æ£’ï¼çŸ¥è¯†æŒæ¡å¾—å¾ˆæ‰å®ï¼Œå‘ç€7åˆ†å‰è¿›ï¼';
            } else if (finalPercentage >= 70) {
                 message = 'ğŸ‰ å¾ˆå‰å®³ï¼å±•ç°äº†è‰¯å¥½çš„ç†è§£ï¼Œç»§ç»­åŠªåŠ›ï¼Œ7åˆ†åœ¨æœ›ï¼';
            } else if (finalPercentage >= 60) {
                message = 'ğŸ‘ ç›¸å½“ä¸é”™ï¼å¤§éƒ¨åˆ†çŸ¥è¯†ç‚¹éƒ½ç†è§£äº†ï¼Œç»§ç»­åŠ æ²¹ï¼';
            } else if (finalPercentage >= 50) {
                message = 'ğŸ˜Š ä¸é”™ï¼æŒæ¡äº†æ ¸å¿ƒå†…å®¹ï¼Œå¯ä»¥æ›´æœ‰è‡ªä¿¡ï¼';
            } else {
                message = 'ğŸ’ª ä¸è¦ç°å¿ƒï¼ä»é”™è¯¯ä¸­å­¦ä¹ ï¼Œæ¢³ç†çŸ¥è¯†ç‚¹ï¼Œä¸‹æ¬¡ä¸€å®šèƒ½è¿›æ­¥ï¼';
            }
            resultMessage.textContent = message;
        }
        
        nextBtn.addEventListener('click', showNextQuestion);
        restartBtn.addEventListener('click', startGame);
        
        startGame();
    </script>
</body>
</html>
